IF schema_id('Maintenance') IS NULL
    EXECUTE('CREATE SCHEMA [Maintenance]')
CREATE TABLE [Maintenance].[Customers] (
    [CustomerId] [int] NOT NULL IDENTITY,
    [FirstName] [nvarchar](max),
    [LastName] [nvarchar](max),
    [DateOfBirth] [datetime] NOT NULL,
    [CustomerCookie] [nvarchar](max),
    CONSTRAINT [PK_Maintenance.Customers] PRIMARY KEY ([CustomerId])
)
CREATE TABLE [Maintenance].[Addresses] (
    [AddressId] [int] NOT NULL IDENTITY,
    [Street] [nvarchar](max),
    [City] [nvarchar](max),
    [StateProvince] [nvarchar](max),
    [PostalCode] [nvarchar](max),
    [AddressType] [int] NOT NULL,
    [CustomerId] [int] NOT NULL,
    CONSTRAINT [PK_Maintenance.Addresses] PRIMARY KEY ([AddressId])
)
CREATE INDEX [IX_CustomerId] ON [Maintenance].[Addresses]([CustomerId])
CREATE TABLE [Maintenance].[ContactDetails] (
    [ContactDetailId] [int] NOT NULL,
    [MobilePhone] [nvarchar](max),
    [HomePhone] [nvarchar](max),
    [OfficePhone] [nvarchar](max),
    [TwitterAlias] [nvarchar](max),
    [Facebook] [nvarchar](max),
    [LinkedIn] [nvarchar](max),
    [Skype] [nvarchar](max),
    [Messenger] [nvarchar](max),
    [CustomerId] [int] NOT NULL,
    CONSTRAINT [PK_Maintenance.ContactDetails] PRIMARY KEY ([ContactDetailId])
)
CREATE INDEX [IX_ContactDetailId] ON [Maintenance].[ContactDetails]([ContactDetailId])
CREATE TABLE [Maintenance].[Orders] (
    [OrderId] [int] NOT NULL IDENTITY,
    [OrderDate] [datetime] NOT NULL,
    [OrderSource] [int] NOT NULL,
    [CustomerId] [int] NOT NULL,
    CONSTRAINT [PK_Maintenance.Orders] PRIMARY KEY ([OrderId])
)
CREATE INDEX [IX_CustomerId] ON [Maintenance].[Orders]([CustomerId])
CREATE TABLE [Maintenance].[LineItems] (
    [LineItemId] [int] NOT NULL IDENTITY,
    [Quantity] [int] NOT NULL,
    [OrderId] [int] NOT NULL,
    [ProductId] [int] NOT NULL,
    CONSTRAINT [PK_Maintenance.LineItems] PRIMARY KEY ([LineItemId])
)
CREATE INDEX [IX_OrderId] ON [Maintenance].[LineItems]([OrderId])
CREATE INDEX [IX_ProductId] ON [Maintenance].[LineItems]([ProductId])
CREATE TABLE [Maintenance].[Products] (
    [ProductId] [int] NOT NULL IDENTITY,
    [Description] [nvarchar](max),
    [Name] [nvarchar](max),
    [ProductionStart] [datetime] NOT NULL,
    [IsAvailable] [bit] NOT NULL,
    [CategoryId] [int] NOT NULL,
    [MaxQuantity] [int] NOT NULL,
    [CurrentPrice] [decimal](18, 2) NOT NULL,
    CONSTRAINT [PK_Maintenance.Products] PRIMARY KEY ([ProductId])
)
CREATE INDEX [IX_CategoryId] ON [Maintenance].[Products]([CategoryId])
CREATE TABLE [Maintenance].[Categories] (
    [CategoryId] [int] NOT NULL IDENTITY,
    [Name] [nvarchar](max),
    CONSTRAINT [PK_Maintenance.Categories] PRIMARY KEY ([CategoryId])
)
ALTER TABLE [Maintenance].[Addresses] ADD CONSTRAINT [FK_Maintenance.Addresses_Maintenance.Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Maintenance].[Customers] ([CustomerId]) ON DELETE CASCADE
ALTER TABLE [Maintenance].[ContactDetails] ADD CONSTRAINT [FK_Maintenance.ContactDetails_Maintenance.Customers_ContactDetailId] FOREIGN KEY ([ContactDetailId]) REFERENCES [Maintenance].[Customers] ([CustomerId])
ALTER TABLE [Maintenance].[Orders] ADD CONSTRAINT [FK_Maintenance.Orders_Maintenance.Customers_CustomerId] FOREIGN KEY ([CustomerId]) REFERENCES [Maintenance].[Customers] ([CustomerId]) ON DELETE CASCADE
ALTER TABLE [Maintenance].[LineItems] ADD CONSTRAINT [FK_Maintenance.LineItems_Maintenance.Orders_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Maintenance].[Orders] ([OrderId]) ON DELETE CASCADE
ALTER TABLE [Maintenance].[LineItems] ADD CONSTRAINT [FK_Maintenance.LineItems_Maintenance.Products_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [Maintenance].[Products] ([ProductId]) ON DELETE CASCADE
ALTER TABLE [Maintenance].[Products] ADD CONSTRAINT [FK_Maintenance.Products_Maintenance.Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Maintenance].[Categories] ([CategoryId]) ON DELETE CASCADE
CREATE TABLE [Maintenance].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_Maintenance.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [Maintenance].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201606292027323_init', N'Maintenance.Data.Migrations.Configuration',  0x1F8B0800000000000400DD5DDD6EE3BA11BE2FD0771074D5163971926D81D3C039075927E931BAD9A4EBEC41EF0246A21D21FA71253A7550F4C97AD147EA2B94FAA3F82B91A22467177B138BE47038331C0E87FCB8FFFBCF7FE73FEFA3D07985691624F1857B7A7CE23A30F6123F883717EE0EAD7FF8D1FDF9A7DFFE667EED477BE7D7BADE87BC1E6E196717EE3342DBF3D92CF39E6104B2E328F0D2244BD6E8D84BA219F093D9D9C9C99F67A7A7338849B89896E3CCBFEC621444B0F8817F2E92D8835BB403E16DE2C330ABBEE3925541D5F90C22986D81072FDC5B10C408C600B738BE0208B8CE651800CCC70A866BD701719C20803097E75F33B84269126F565BFC01840F6F5B88EBAD4198C18AFBF3A6BAEE404ECEF281CC9A8635296F97A124322478FAA192CC8C6FDE4BBE2E911C96DD3596317ACB475DC8EFC25D145DC0D475F8CECE17619A57E4C48BAB04F171DDECC8110B8F884D60D3C9FF1D398B5D887629BC88E10EA5203C72EE774F61E0FD15BE3D242F30BE88776148F38939C565CC07FCE93E4DB630456F5FE09AE37EE9BBCE8C6D3FE30990E692B6E5389731FA70E63A9F3133E02984C42C2899AC5092C2BFC018A60041FF1E200453ACD5A50F0BC10A5C707DDE046986F23FEB2EB131E259E56229EE3FC178839E7369EF5DE726D843BFFE52B1F1350EF024C48D50BA835D3D7D02137584E71BBC5B7F0C52F45CF7957F7A08F2BE0551B6D3AA55B24892976004D63F83D760532892EBF8D2F753986530739D2F302C6A64CFC1B67420C755E96333576ED224FA92844D4B52F6F800D20D4498F744516195EC52CF8037EC0811F0D015442008A5FC11D25CD5864B790DC24ACDABA25A3D245D8EEF521F3B0029AB459154906C892046AE5826C4F9ACF16EAD3EAF5289A1CBAB5A1DD8E3555CF4717854D3A9FC1D9EBAB0D0E2B83E6851B03272272B2C1288BFBD06B137BE5BBD4F3204C205AE3F7A57955DE4BD90BE28B7577EEFE9C9BB8D4DDB0D129F61EBA179AFA774E1BD9C0BE783CDA22ABAEDA1432B9A975EF1154FC0C80E3862B7C95310C2FBE7241E7F3EFC828D609A9EEED6EBC09BA8AF877F06B9F32E3646A3777683B7654F38881B3FCC0DE217E82FE3F1BDFF0BED1EC7EAE5360F42E34DEEC0C65E32A775D0BD43543E0EEC88647BB9EC22B63474D5459B03BBE882873EAE99349C2A0E2C3ACCB785D65BC4821259C19B6085F9FEBE8315ED3D101FA828B648BA4C615F09970846F29D595DFA58CD86862BB64498915CB1D54CAC69194EC6BAD981E763CD469F2949B79D6A56FE6D07AA7A36A199A633E9D8EEA489BFF3D07033B0B2621B43E7A79F621EE872540DB19D275249C25555A6E6ABAE60B57F211C18CDC0AAD58127206545A6F34FDB00879B7E5730F3D2605B26F6470EF72649055732C4E359219022EBB57E995DBEE2E02E6F51D3FA98609307B1F9128F79D824E99BF53E14EC87F19A8B5D9A6233B94F832690B9825E10011C15DFA7F8AFEAF4ED47D7597920A7DBD5897E8AA212866976A26A76E8C404A54AE39C84B6190C37CDC7997A5DCB8C3CC8ABC7FFD8D4A276607CA1783E20D4305B6A769198852FD38BCBEC26049BE624D6C83073C2199DAE1CD242B11EF06A1FBE61BDD116C36AE316464F30AD06F63108C342CBBF8270877F9F0ACA63AAAFB07AB6B83E760511C82765D5EC4CAFD90A7A49ECD30D3F88EA2805DFA20C66FB348032287A8755C65D8C75017575711D1559093D0D3CC0106ECBDC9D5CF27C835B9AF81FDBEB2EE37B2CA13C32A8EAFF4947AB9759967841A124769635DB4DB6CFEBD877BAD2E4C28900F65F5859C116AB074FF30BF70FC2505AC892ED6343B6D90AB3744F5D7E35B88BAFB0D011742EBDF23AC502641EF045F788A5E3B35FF00202F31537C84F55E20CDB18364A71B509622FD882B0837BAE9DE1DD849C3FD2135F7205B730CE97960EBDD8B3407AE244D725A9F98C32B376EB53A4FD54C6D2754CAD63326A53ECCA3052D4D92425DBC5C9F1B1D84B2FEB6A1FEE8436D62E192D46DA4F8B2632372EB3A63204559A8DCB269AB839D5ED856FC1C9C9799FD0FCE4FAF8261C1C974C5299872AB3D4984793F9D4373A5562B6C38E0F6F7172C67514AE38F2303237B9322C7B9FD2D6EA145DA75D0819C381EC8D4F34527449FAF0DDDA1CC7BC8EDE9579C57E76C7A9C59A832902392171A08CB2D459046A312419A811CDA48D277DCB152744BF584F2516AD654E99F2320BF35462B0E76170132C5348455889A70DB583AE33097911DCCBCE29BE66B04A506455F28CB78B9CF40A222E88C0FBDA267125446D82576489503788052264DBDC418309A2A5DCB0FB920E72F5355C814C15157434A78E8B050ACDEAD141A4C9330A34C87CEB924A69788154B48D23E1A850662528893A7BA7AAA9AE12F2B6AE9132214360EC4298351A59128A1265A6BCEB6307AB2108D5751C511C3A3B78933DBCCE804C76ED343D6EFA584B89BFA8214AA76DC3A9B3E5A4B8AF676B8B28149BCC916C843F271747DFB6F9D1D9FE508C53CEA645008A0D4FA7146D464FDC54CBF8A501B95E48DE5F067C104E516ABCAEBDA7104F8C244EA23D3AD48C0F693BA67C7E9B6F50C67576C2A84FB048F841CAE6B3127D587D98CF1430C5F92D284E6728D862F5C5599598C5C50F2B73385F54D298798C84F96089F48492146C20579A3B4A1F1648B41C2BF904F2239E851F09D524C19662A5AE3BE4E3295173F5F25DB7C8FF1642BB02C379ACF2AA8D286FF0E8A23CBC2D4E68256E506CEAE4F0511082B4E50AE022097751DC9D605253A3607E3431EAB33EAD06C847936ABEEA5362907A3431A6409F1E8FD693C9AD2E13A9CE679C16853D85602DC2868F353F2DE36CE2312BE3AC437A73DB54B6548999826DD1125602C1DA68D5782C9A50FDCD40F1C5AD0746DD927B10ED7C30582A961DA6489F268D98A209D2DFF5A931B71324722F0BCC278B998339D024E122693B37DEB66FD0F1E5EDED95F2E60FA418A1779D56A9E93240249A2653A04F8F021BD1D4A8CFFAB41838114D8D29D0A7C7428668826C89C1C2487041CCBA48BE1A2C8B04F8C32C8BE4AB812F7A11E678F5C9C02A1ADC0E6313CDE7EFD45354FB2D2B0F21DD3D6A7806453BE5ECA80F6F9899A13AD1E9A0536259044AE567435AF5FE47A0267F29E0BBB19D66BF6B653E2417696E41EAA62D6E87C03438C7A3807EB4516BAE12D3B49AAF868634807153E74C4C0CA53E7E3A98F9B4E41A0CAC4791BAD1301E65CB2165ABDCCBD1D801662F4717E8D3137798A6BB4BE1F2BF648C4DA13E5D060440D3640A0C5C24758EC5B8C896F32D3535060FC02CFD74818903A76101AC0BA74BDECD2CA4327576DB84FA20A7C70E41D9741A1BD09F3BA3EA48485AF25548EF2479C92529E755C2B0FBC13521835856C9912B78E3EEE7D9C3D55B86D7C352B9AB7F848B30C0E36D2ADC823858C30C9597BBDDB393D333EED5B6F7F382DA2CCBFC509270953DA3C6EAEB008F9805B9943B212B866825E1DDB2F815A4DE33487F1781FDEF69727DDE26B32226797FCCC79FD070EF8F19B067FC04550F7319F205A8518C857DF4C94AB9F4C34E5684A48F375951141F68B222277984A9508EF553060515E18ECC32F6E1FEC2FD57D1ECDC59FEFDB16979E4141B8773E7C4F9F76090C396FBFF077D8E485B3C6C73031989AC481E33B2B21DE1C1222B6A924789ACE8C91E1EB222C83F2E64B716710F08D97919FA91202B4AC24340766E54EE158699DAB29BEF933E5F33CA2226BC58D33BA890BC58F33D7976790EED100FA68C62073CDABF8FEA64F6AAA1B7AA99D552432597CC3A270DC7B019398061F2273E463118C9AB1E56BE7BB08D929083B3F46B92D7399E821E7E4D789241DBAF919676D198F8A4473FFF2C3EE8E14FFDA0479FC07AD0E7344699523DA7804A7C1620F9E62EF0D4C84EE1AE783F60BE154EF900B0F76F0305DA13E66E8F68676FEF1F0EC13E2958BDE3429171EE602223D104A7BF071753DDF83707C47F3346A4BA73F20E9D8B26C45C536723594C0308EB8531EEFF6EC1E4A8F1EF09284EB02D1303B80F6B37EA2B1F06DBCDF16CA7B5CB7709F53E24B4DBC0840746724F89DC3631D97701D4162146BC02E518EC56087679C980B93C82F55E6EFFD4C847BE2BB257127A22256D1D2901BDED70EE6E3477EBE8DAA1AD7CCFD5CA2FF4587D6FEB4901A0E47B685CB4D04953D4D68F12ECA88290B721C8DB3ABA57C1FF047511C7256A8A14B52A49095A9C048DCE4F211609D706A3E4660403531A00413A3ED6DC7CC8D2B929C19BD80F7F401079FFE1320E81BA3C3F204EDA1E25AEC9A4227E945DEB1E7078C4D758C1C0395FC6DC233EE430474379CB50DD920BB1FD44340C825BBCF488A321EAFFA2C5C158166C1A12F9FF4C1B438F8983489D65BC4EEA908CE3A8AE229CF423E0E320E93245C11A3B1E5CEC61C74B3F207C1D3DE55714EE7668BB4378C8307A0A1921E6615D5BFF054C9DE5797E571C5165430C01B319E4C74877F1C75D10FA84EF1BC9918682441E2F562706C501557E72B0699E34FE2C20D754842AF19130F70146DB1013CBEEE21578857D78FB9AC14F7003BCB7FAEEAA9A48B72258B1CFAF02B049419455349AF6F827B6613FDAFFF47F6B283AC392790000 , N'6.1.3-40302')

